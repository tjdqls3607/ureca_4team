<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>4조와 함께 해요!</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <body class="bg-light">
    <div class="container py-5" style="max-width: 500px">
      <div class="card shadow-lg p-4">
        <h2 class="text-center text-primary mb-4">🚀 4조와 함께 해요!</h2>
        <form id="applyForm">
          <div class="mb-3">
            <input
              type="text"
              id="name"
              class="form-control"
              placeholder="이름"
              required
            />
          </div>
          <div class="mb-3">
            <select id="mbti" class="form-select">
              <option value="">MBTI 선택</option>
              <option value="ISTJ">ISTJ</option>
              <option value="ISFJ">ISFJ</option>
              <option value="INFJ">INFJ</option>
              <option value="INTJ">INTJ</option>
              <option value="ISTP">ISTP</option>
              <option value="ISFP">ISFP</option>
              <option value="INFP">INFP</option>
              <option value="INTP">INTP</option>
              <option value="ESTP">ESTP</option>
              <option value="ESFP">ESFP</option>
              <option value="ENFP">ENFP</option>
              <option value="ENTP">ENTP</option>
              <option value="ESTJ">ESTJ</option>
              <option value="ESFJ">ESFJ</option>
              <option value="ENFJ">ENFJ</option>
              <option value="ENTJ">ENTJ</option>
            </select>
          </div>
          <div class="mb-3">
            <input
              type="text"
              id="interest"
              class="form-control"
              placeholder="관심사"
              required
            />
          </div>
          <div class="mb-3">
            <button
              type="submit"
              class="btn btn-primary w-100"
              data-bs-toggle="modal"
              data-bs-target="#exampleModal"
            >
              신청하기
            </button>

            <!-- Modal -->
            <div
              class="modal fade"
              id="exampleModal"
              tabindex="-1"
              aria-labelledby="exampleModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                      메세지
                    </h1>
                    <button
                      type="button"
                      class="btn-close"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    ></button>
                  </div>
                  <div class="modal-body">환영합니다!</div>
                  <div class="modal-footer">
                    <button
                      type="button"
                      class="btn btn-primary"
                      data-bs-dismiss="modal"
                    >
                      확인
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <a href="../index.html" type="button" class="btn btn-primary w-100"
            >돌아가기</a
          >
        </form>
      </div>

      <div class="mt-4">
        <h4 class="text-center text-secondary">✅ 신청 목록</h4>
        <div id="applicantsList" class="row g-3"></div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("applyForm");
        const list = document.getElementById("applicantsList");
        const applicants = JSON.parse(localStorage.getItem("applicants")) || [];

        function renderApplicants() {
          list.innerHTML = "";
          applicants.forEach((applicant) => {
            const col = document.createElement("div");
            col.classList.add("col-md-6");

            const card = document.createElement("div");
            card.classList.add("card", "shadow-sm", "p-3", "bg-white");

            card.innerHTML = `
                        <h5 class="text-primary">${applicant.name}</h5>
                        <p class="mb-1"><strong>MBTI:</strong> ${applicant.mbti}</p>
                        <p class="mb-0"><strong>관심사:</strong> ${applicant.interest}</p>
                    `;
            col.appendChild(card);
            list.appendChild(col);
          });
        }

        form.addEventListener("submit", (e) => {
          e.preventDefault();
          const name = document.getElementById("name").value;
          const mbti = document.getElementById("mbti").value;
          const interest = document.getElementById("interest").value;

          if (!name || !mbti || !interest) {
            alert("모든 항목을 입력해주세요!");
            return;
          }

          const newApplicant = { name, mbti, interest };
          applicants.push(newApplicant);
          localStorage.setItem("applicants", JSON.stringify(applicants));

          renderApplicants();
          form.reset();
        });

        renderApplicants();
      });
    </script>
  </body>
</html>
